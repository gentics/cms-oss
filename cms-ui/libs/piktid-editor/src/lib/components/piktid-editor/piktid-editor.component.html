<gtx-progress-bar [active]="busy"></gtx-progress-bar>

<ng-container *ngIf="!loggedIn">
    <form *ngIf="loginForm" [formGroup]="loginForm">
        <gtx-input [label]="'username'" type="text" formControlName="username"></gtx-input>
        <gtx-input [label]="'password'" type="password" formControlName="password"></gtx-input>
        <gtx-button type="primary" [disabled]="!loginForm.valid" (click)="onLogin()">Login</gtx-button>
    </form>
</ng-container>

<ng-container *ngIf="loggedIn">
    <div *ngIf="userInfo" class="user-info">
        <div class="user-info-item">
            <span class="user-info-item-label">Username:</span>
            <span class="user-info-item-value">{{ userInfo.username }}</span>
        </div>
    </div>

    <div class="image-controls">
        <gtx-file-picker
            class="upload-button"
            gtxFileDropArea
            accept="image/*"
            [multiple]="false"
            [gtxPreventFileDrop]="false"
            [disabled]="!loggedIn || busy"
            (fileSelect)="onImagePicked($event)"
        >
            <icon left>image</icon>{{ 'select_image' }}
        </gtx-file-picker>
    </div>

    <gtxpict-anonymization-editor
        *ngIf="pickedImage"
        class="image-editor"
        [imageUrl]="imageUrl"
        [imageId]="imageId"
        [faceIds]="faceIds"
        [facePositions]="facePositions"
        [uploading]="imageUploadStatus === 'pending'"
        (uploadImage)="uploadImage()"
    ></gtxpict-anonymization-editor>
</ng-container>
