h2. Channel Synchronization

This Feature activates the advanced UI for channel synchronization.

endprologue.

h3. Configuration

To activate Channel Synchronization add the following setting to your node.conf and restart the CMS.

<javascript filename="conf/features.yml">
feature:
  channelsync: true
</javascript>

NOTE: Channel Synchronization requires the Feature Multichannelling to be activated.
After changing the configuration file, the .Node System must be restarted for the changes to fully take effect.


h3. Description

The Channel Synchronization provides information about the localization status
of a channel and adds functions to synchronize a channel with its master.

h4. Permissions

Users must have the permission flag Synchronize channel set for the channel to be
able to use this feature. When a channel is created, the flag will initially
*not* be set for any user group.

h4. Synchronization Info

Executing the action Channel Synchronization from the context menu of an object
list or the tree will open the Channel Synchronization Info dialog:

!images/gcn_dialogs/channel_sync.png!

In the Overview tab, this dialog shows

* Selected Objects (e.g. the Folder 3. Subchannel)
* Affected Objects List of localized or local objects in the selected folder (only for folders, will also show objects from subfolders, when Recursive is checked). When the checkbox for a specific object type is unchecked, objects of that type will not be affected when executing a synchronization action.
* Channel Channel, for which the Info is shown
* Master List of all master nodes of the channel for pushing localized and local objects into a master. If a master node is not selectable, this means that a sub-channel contains localized objects and therefore cannot be omitted in the synchronization process.
* Recursive (only for folders) When checked, the info will be shown also for subfolders.
* For folders, there is also a Details tab available, that will show the lists of affected objects separated by type.

The dialog provides three buttons:

* Push to Master pushes the affected objects to the selected master (see below)
* Remove Localization removes the localization
* Cancel cancels the dialog without performing any synchronization action.

h4. Pushing to a Master

When this action is executed, all affected objects of the selected types are pushed
to the selected master. The contents of localized copies are copied over their
respective master objects and local objects are "moved" to the master. Afterwards
all localized copies in the channel are removed. The result of this process is that
the master will be set to the current status of the channel and the channel will no
longer contain localized or local objects.

NOTE: The synchronization process might not be possible for all affected objects due to
insufficient permissions or locking of objects. If such a situation occurs, the user
will be informed about the number and type of objects that could not be pushed to the master.

h5. Dependencies

When an object which is to be pushed contains links to other objects in content tags or
object properties, pressing the button "Push to master" will not immediatelly perform the
operation. Instead these dependencies are shown, and the objects which should also be pushed
to the master node can be selected. This list will only show objects which can actually be
moved.

!images/gcn_dialogs/channel_sync_dependencies.png!

The list will not show objects for which any of the following points are true:
* the user does not have enough permissions to move them
* the object is inherited and already present in the target node
* the object is a localized copy, and the master object is in a channel of the target node

If there are any other objects linked in the selected objects, those will automatically be
pushed to the master (the dialog will show the number of those indirect dependencies for
each object type).

NOTE: When synchronizing a folder which has a startpage set, and selecting that pages
should be pushed to master, the startpage will be pushed whether or not it was selected
in the dependency dialog. But if it was selected, the indirect dependencies will also
be pushed.

*Necessary Permissions*

To push a localized copy to the master, the user needs permission to edit the object.
To push a local object from the channel to a master, the user needs permission to create the object.

h4. Removing Localization

When this action is executed, all localized copies and local objects of the selected
types are removed from the channel. The result of this process is that the channel
will be set to the current status of the master.

NOTE: The synchronization process might not be possible for all affected objects due to insufficient
permissions or locking of objects. If such a situation occurs, the user will be informed about the
number and type of objects that could not be removed from the channel.

*Necessary Permissions*

To remove a localized copy from the channel, the user needs permission to edit the object.
To remove a local object from the channel, the user needs permission to delete the object.
