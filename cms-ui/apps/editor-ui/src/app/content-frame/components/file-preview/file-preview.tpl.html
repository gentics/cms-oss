<div class="preview-pane" [ngClass]="file.type || ''">
  @if (file.type === 'file') {
    <div class="file-preview">
      <div class="file-icon" [ngClass]="fileExtension || ''">
        <i class="material-icons" [attr.translate]="'no'">insert_drive_file</i>
        @if (fileExtension) {
          <span class="extension"
            [ngClass]="'len-' + fileExtension?.length">
            {{ fileExtension | uppercase }}
          </span>
        }
      </div>
      <div class="file-details">
        <div class="name">{{ file.name }}</div>
        <div class="type">{{ file.fileType }}</div>
        <div class="size">{{ file.fileSize | filesize }}</div>
      </div>
    </div>
  }
  @if (file.type === 'image') {
    <div class="image-preview">
      <div class="filename">{{ file.name }}</div>
      <div class="thumbnail" [class.loading]="imageLoading | async">
        <img class="previewed-image" [src]="imageUrl"
          [width]="displayDimensions.width" [height]="displayDimensions.height"
          (load)="onImageLoadSuccess()"
          (error)="onImageLoadError($event)"
          #thumbnailImage>
        <div class="size-double"
          [style.width.px]="displayDimensions.width"
        [style.padding-bottom.%]="100 * displayDimensions.height / displayDimensions.width"></div>
      </div>
      <div class="image-details">
        <span class="dimensions">{{ { width: file.sizeX, height: file.sizeY } | imagedimensions | gtxI18n }}</span>
        <span class="separator"> - </span>
        <span class="filesize">{{ file.fileSize | filesize }}</span>
      </div>
    </div>
  }
  <div class="author-details">
    @if (creator) {
      <div class="created"
             [innerHTML]="'editor.file_preview_creator_label' | gtxI18n:{
                    name: creator.firstName + ' ' + creator.lastName,
                    date: (file.cdate | gtxI18nDate),
                    time: (file.cdate | gtxI18nDate:'time')
                }"></div>
    }
    @if (file.cdate !== file.edate && editor) {
      <div class="edited"
             [innerHTML]="'editor.file_preview_editor_label' | gtxI18n:{
                    name: editor.firstName + ' ' + editor.lastName,
                    date: (file.edate | gtxI18nDate),
                    time: (file.edate | gtxI18nDate:'time')
                }"></div>
    }
  </div>
  <div class="actions">
    @if (file.type === 'image') {
      <div class="action-rotate-left">
        <gtx-button flat (click)="rotateImage('ccw')" [disabled]="!isEditableImage(file)">
          <i class="material-icons left">rotate_left</i> {{ 'editor.rotate_image_left_button' | gtxI18n }}
        </gtx-button>
      </div>
    }
    @if (file.type === 'image') {
      <div class="action-rotate-right">
        <gtx-button flat (click)="rotateImage('cw')" [disabled]="!isEditableImage(file)">
          <i class="material-icons left">rotate_right</i> {{ 'editor.rotate_image_right_button' | gtxI18n }}
        </gtx-button>
      </div>
    }
  </div>
  <div class="actions">
    @if (file.type === 'image') {
      <div class="action-edit">
        <gtx-button flat (click)="editImage()" [disabled]="!isEditableImage(file)">
          <i class="material-icons left" [attr.translate]="'no'">edit</i> {{ 'editor.edit_image_button' | gtxI18n }}
        </gtx-button>
      </div>
    }
    @if (file.type === 'file') {
      <div class="action-download">
        <a [href]="downloadUrl" [download]="file.name" target="_blank">
          <gtx-button flat>
            <i class="material-icons left" [attr.translate]="'no'">file_download</i> {{ 'editor.download_file_button' | gtxI18n }}
          </gtx-button>
        </a>
      </div>
    }
    @if (hasFileEditPermission$ | async) {
      <div class="action-replace"
        [overrideSlot]="file.type === 'image' ? 'replaceImageButton' : 'replaceFileButton'">
        <gtx-progress-bar #uploadBar></gtx-progress-bar>
        <gtx-file-picker flat
          [overrideSlot]="file.type === 'image' ? 'replaceImageButton' : 'replaceFileButton'"
          [overrideParams]="{ FOLDERID: file.folderId, NODEID: nodeId }"
          [accept]="acceptedFiles()"
          (fileSelect)="replaceFile($event, uploadBar)"
          (fileSelectReject)="replaceFile($event, uploadBar)">
          <icon left>file_upload</icon>
          @if (file.type === 'image') {
            <span>{{ 'editor.upload_new_image_button' | gtxI18n }}</span>
          }
          @if (file.type === 'file') {
            <span>{{ 'editor.upload_new_file_button' | gtxI18n }}</span>
          }
        </gtx-file-picker>
        <div class="keep-filename">
          <gtx-checkbox [(ngModel)]="keepFileName" [label]="'editor.keep_filename_label' | gtxI18n"></gtx-checkbox>
        </div>
      </div>
    }
  </div>
</div>
