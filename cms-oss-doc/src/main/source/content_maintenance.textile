h2. Content Maintenance

The content maintenance tools help to keep track of what objects need to be published.

endprologue.

h3. Finding the tools

The content maintenance tools can be found in the tree under +Administration|Content.Admin|Maintenance+

h3. Available Tools

!images/gcn_dialogs/maintenance_tools.png!

To use one of the maintenance tools, one of the radio buttons must be selected, and the button +Execute Selected Tool+ clicked.

INFO: Some of the tools (all but +Stop publishing+ and +Reload configuration+) require at least the selection of one or more object types.

h4. Republish objects

All selected objects will be marked for being republished at the next publish run. The details list on the right side will show an overview of the objects which are marked for republishing grouped by type and node.

h4. Delay objects

All selected objects, that are currently marked for republish will be delayed.

Delayed objects will not be republished until they are marked for being published again, or the tool +Republish delayed objects+ is used on them.

h4. Republish delayed objects

All selected objects, that are currently delayed from republishing will be republished.

h4. Mark objects published

All selected objects, that are currently marked for republishing or delayed will be marked as being published.

WARNING: When objects that need to be republished because they were changed are marked as being published, the changes will _not_ go online until the object is marked for republishing again.

h4. Stop publishing

Stop a currently running publish process. All changes done in the current publish process will be undone (rolled back).

This tool does not require further selection of object types or restriction to nodes or content repositories, since there is a publish process that handles all marked objects. 

INFO: When the current publish process is stopped, all objects that were marked for being republished will remain in that state and will be handled in the next publish process.

h4. Reload configuration

Executing this tool will let the system reload the configuration so that changes can take effect. This can be used for instance to switch features on or off or changing some other configuration settings without having to restart the system.

INFO: Database settings for the backend database will not be affected by reloading the configuration, since the database connections will not be closed and reopened. Also the velocity rendering engine is not re-initialized, which means that changes to the configuration
of the velocity engine will not be effective by reloading the configuration.

h3. Selecting the object types

!images/gcn_dialogs/maintenance_types.png!

In this select box, the object types must be selected.

h3. Restriction to nodes and content repositories

!images/gcn_dialogs/maintenance_nodes.png!

!images/gcn_dialogs/maintenance_crs.png!

The two select boxes labelled with +Node+ and +ContentRepository+ allow restricting to objects that are published into a specific node or content repository.

INFO: When both node and content repository are restricted, objects are only selected, if the selected node publishes into the selected content repository. Otherwise, the tool would not have any effect.

h3. Restriction to creation date

!images/gcn_dialogs/maintenance_limit.png!

With the select box +Limit to date range+ and the fields for the +Range Start+ and +Range End+ the selection can be restricted to objects that were created in the given time interval.

h3. Display of waiting tasks

!images/gcn_dialogs/maintenance_tasks.png!

The list of waiting tasks shows, what actions are currently scheduled to be done in a background job. The task to be done next is always listed on top and printed bold.
The actions are grouped by action type (if the individual actions next to each other have the same action type).

The list show above means, that there is one maintenance action currently done, then the dependencies for three user actions have to be calculated. After this the publish process will run and after that another two dependency calculations have to be done.

The list may contain the following types of actions

* +Maintenance action+ are actions that were triggered by executing one of the tools in the maintenance dialog.
* +Dependency calculation+ means that a user action was recorded that might lead to marking objects for republishing. For instance, when the name of a folder is changed, the system has to check, which other objects need to be republished since they render that name.
* +Publish process+ When the scheduler starts the publish task, an entry is made in this task list. The publish process then has to wait until all tasks above the +Publish process+ entry are done.

NOTE: Maintenance actions and the publish process are done sequentially. That means if a publish process is already running (shown in this list) and one of the tools (other than +Stop publishing+) is executed, a maintenance action will be scheduled, which will be done after the currently running publish process.

h3. Display of currently dirted objects

!images/gcn_dialogs/maintenance_details.png!

The +Details+ view on the right side shows numbers and percentages of objects which are marked to be published or which are delayed. The list is grouped by type and for each type grouped by node/channel.

NOTE: If a node has updating of the filesystem/ContentRepository deactivated, it will be displayed italic and marked with an asterisk.

.