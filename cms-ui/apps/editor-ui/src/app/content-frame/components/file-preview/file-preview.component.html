<div class="preview-pane" [ngClass]="file.type || ''">
    <div *ngIf="file.type === 'file'" class="file-preview">
        <div class="file-icon" [ngClass]="fileExtension || ''">
            <icon>insert_drive_file</icon>
            <span
                *ngIf="fileExtension"
                class="extension"
                [ngClass]="'len-' + fileExtension?.length"
            >{{ fileExtension | uppercase }}</span>
        </div>
        <div class="file-details">
            <div class="name">{{ file.name }}</div>
            <div class="type">{{ file.fileType }}</div>
            <div class="size">{{ file.fileSize | filesize }}</div>
        </div>
    </div>

    <div *ngIf="file.type === 'image'" class="image-preview">
        <div class="filename">{{ file.name }}</div>
        <div class="thumbnail" [class.loading]="loading">
            <picture class="previewed-image">
                <source
                    *ngFor="let variant of imageVariants"
                    [srcset]="variant.url"
                    [media]="variant.mediaQuery"
                    [type]="file.fileType"
                />
                <img [src]="imageUrl" alt="" />
            </picture>
        </div>
        <div class="image-details">
            <span class="dimensions">{{ { width: file.sizeX, height: file.sizeY } | imagedimensions | i18n }}</span>
            <span class="separator"> - </span>
            <span class="filesize">{{ file.fileSize | filesize }}</span>
        </div>
    </div>

    <div class="author-details">
        <div
            *ngIf="creator"
            class="created"
            [innerHTML]="'editor.file_preview_creator_label' | i18n:{
                name: creator.firstName + ' ' + creator.lastName,
                date: (file.cdate | i18nDate),
                time: (file.cdate | i18nDate:'time')
            }"
        ></div>
        <div
            class="edited"
            *ngIf="file.cdate !== file.edate && editor"
            [innerHTML]="'editor.file_preview_editor_label' | i18n:{
                name: editor.firstName + ' ' + editor.lastName,
                date: (file.edate | i18nDate),
                time: (file.edate | i18nDate:'time')
            }"
        ></div>
    </div>

    <div *ngIf="file.type === 'image'" class="actions">
        <div class="action-rotate-left">
            <gtx-button flat (click)="rotateImage('ccw')" [disabled]="!canEdit">
                <i class="material-icons left">rotate_left</i> {{ 'editor.rotate_image_left_button' | i18n }}
            </gtx-button>
        </div>
        <div class="action-rotate-right">
            <gtx-button flat (click)="rotateImage('cw')" [disabled]="!canEdit">
                <i class="material-icons left">rotate_right</i> {{ 'editor.rotate_image_right_button' | i18n }}
            </gtx-button>
        </div>
    </div>

    <div class="actions">
        <div *ngIf="file.type === 'image'" class="action-edit">
            <gtx-button flat (click)="editImage()" [disabled]="!canEdit">
                <icon left>edit</icon> {{ 'editor.edit_image_button' | i18n }}
            </gtx-button>
        </div>

        <div *ngIf="file.type === 'file'" class="action-download">
            <a [href]="downloadUrl" [download]="file.name" target="_blank">
                <gtx-button flat>
                    <icon left>file_download</icon> {{ 'editor.download_file_button' | i18n }}
                </gtx-button>
            </a>
        </div>

        <div
            *ngIf="canEdit"
            class="action-replace"
            [overrideSlot]="file.type === 'image' ? 'replaceImageButton' : 'replaceFileButton'"
        >
            <gtx-progress-bar [active]="replacing"></gtx-progress-bar>
            <gtx-file-picker
                flat
                [overrideSlot]="file.type === 'image' ? 'replaceImageButton' : 'replaceFileButton'"
                [overrideParams]="{ FOLDERID: file.folderId, NODEID: nodeId }"
                [accept]="acceptedFiles()"
                (fileSelect)="replaceFile($event, uploadBar)"
                (fileSelectReject)="replaceFile($event, uploadBar)"
            >
                <icon left>file_upload</icon>
                <span>{{ ('editor.upload_new_' + file.type + '_button') | i18n }}</span>
            </gtx-file-picker>

            <div class="keep-filename">
                <gtx-checkbox [(ngModel)]="keepFileName" [label]="'editor.keep_filename_label' | i18n"></gtx-checkbox>
            </div>
        </div>
    </div>
</div>
