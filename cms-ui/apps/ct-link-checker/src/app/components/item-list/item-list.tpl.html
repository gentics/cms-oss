<div class="content-list" [class.empty]="items?.length === 0">
  @if (itemsInfo?.total > 0) {
    <div class="main-header">
      <span class="left-items">{{ 'common.displaying_pages' | gtxI18n:{ number: min(itemsInfo.perPage, itemsInfo.total, items.length), all: itemsInfo.total } }}</span>
      <div>
        <gtx-button size="small" type="secondary" flat (click)="expandAll()">{{ 'common.expand_all' | gtxI18n }}</gtx-button>
        <gtx-button size="small" type="secondary" flat (click)="collapseAll()">{{ 'common.collapse_all' | gtxI18n }}</gtx-button>
        <gtx-dropdown-list align="right">
          <gtx-dropdown-trigger>
            <gtx-button icon type="secondary">
              <i class="material-icons">more_vert</i>
            </gtx-button>
          </gtx-dropdown-trigger>
          <gtx-dropdown-content>
            <gtx-dropdown-item (click)="selectDisplayFields()">{{ 'common.select_display_fields_label' | gtxI18n }}</gtx-dropdown-item>
            <gtx-dropdown-item (click)="selectSorting()">{{ 'common.sorting_fields_label' | gtxI18n }}</gtx-dropdown-item>
          </gtx-dropdown-content>
        </gtx-dropdown-list>
      </div>
    </div>
  }
  @for (item of items | paginate: paginationConfig; track identify($index, item)) {
    <gtxct-item-list-header #header
      class="list-header icon-checkbox-trigger"
      [item]="item"
      [itemsInfo]="itemsInfo"
      [filterTerm]="filterTerm"
      [isCollapsed]="isItemCollapsed(item.page.id)"
      (isCollapsedChanged)="itemCollapsedChanged(item.page.id, $event)">
    </gtxct-item-list-header>
    <div class="list-body" [class.collapsed]="isItemCollapsed(item.page.id)">
      @for (link of item.links; track link) {
        <gtxct-item-list-row
          [item]="link"
          [filterTerm]="filterTerm"
          [liveUrl]="item.page.liveUrl"
        (replaceLinkClicked)="replaceLinkClicked(item.page.id, $event)"></gtxct-item-list-row>
      }
    </div>
  }

  <gtxct-paging-controls
  (pageChange)="pageChanged($event)"></gtxct-paging-controls>
</div>
